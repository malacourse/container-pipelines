---
deploy_setup:
  build_project:
    NAMESPACE: redhat-cicd
    DEV_NAMESPACE: redhat-dev
  dev_project:
    NAMESPACE: redhat-dev
    NAMESPACE_DISPLAY_NAME: Redhat DEV Project
  qa_project:
    NAMESPACE: redhat-qa
    NAMESPACE_DISPLAY_NAME: Redhat QA Project

openshift_cluster_content:
- galaxy_requirements: "{{ inventory_dir }}/../../.openshift/requirements.yml" 
- object: deployments 
  configmaps:
  - name: config-env
    namespace: "{{ deploy_setup.dev_project.NAMESPACE }}"
    properties_file: "{{ inventory_dir }}/../../demo/src/main/resources/appdisplay.properties"
    destination: "{{ inventory_dir }}/../../demo/.openshift/files"
  content:
  - name: create-config-maps
    pre_steps:
    - role: "custom-roles/roles/generate-configmaps"
    namespace: "{{ deploy_setup.dev_project.NAMESPACE }}"
    file: "{{ inventory_dir }}/../../demo/.openshift/files"
    tags:
    - deploy
  - name: deploy-template
    namespace: "{{ deploy_setup.dev_project.NAMESPACE }}"
    template: "{{ inventory_dir }}/../../.openshift/deployment/template.yml"
    params: "{{ inventory_dir }}/../../.openshift/deployment/dev/params"
    tags:
    - deploy
##  - name: app-config
##    namespace: "{{ NAMESPACE }}"
##    template: ".openshift/deployment/config_maps.yml"
##    params: ".openshift/deployment/dev/params"
##    tags:
##    - deploy
